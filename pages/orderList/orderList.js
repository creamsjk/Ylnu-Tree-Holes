(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orderList/orderList"],{"14af":function(e,t,n){},"1b04":function(e,t,n){"use strict";n.r(t);var o=n("8afb"),r=n("bd8b");for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("dea3");var a,u=n("f0c5"),s=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);t["default"]=s.exports},"327c":function(e,t,n){"use strict";(function(e){n("34c8");o(n("66fd"));var t=o(n("1b04"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"8afb":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uSkeleton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-skeleton/u-skeleton")]).then(n.bind(null,"f64a"))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,"f532"))},uList:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-list/u-list")]).then(n.bind(null,"d1b1"))},uListItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-list-item/u-list-item")]).then(n.bind(null,"5a7f"))},uLoadmore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-loadmore/u-loadmore")]).then(n.bind(null,"d9d0"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,!e.loading&&e.orderList.length>0?e.__map(e.orderList,(function(t,n){var o=e.__get_orig(t),r=e.getStatus(t.status);return{$orig:o,m0:r}})):null);e.$mp.data=Object.assign({},{$root:{l0:n}})},i=[]},bd8b:function(e,t,n){"use strict";n.r(t);var o=n("df6e"),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},dea3:function(e,t,n){"use strict";var o=n("14af"),r=n.n(o);r.a},df6e:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n("a34a")),r=n("3476");n("6ee4"),a(n("2726"));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return d(e)||f(e)||l(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function f(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function d(e){if(Array.isArray(e))return g(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function h(e,t,n,o,r,i,a){try{var u=e[i](a),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(o,r)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){h(i,o,r,a,u,"next",e)}function u(e){h(i,o,r,a,u,"throw",e)}a(void 0)}))}}var p={data:function(){return{countToal:1,colorList:["#909399","#f9ae3d","#f9ae3d","#3c9cff","#5ac725"],options:[{text:"删除",style:{backgroundColor:"#dd524d"}}],isloading:!1,loading:!0,status:"loadmore",wh:0,active:1,paging:{page:1,pageSize:6},orderList:[],show:!0,orderId:"",touchT:null,TouchE:null}},computed:{},created:function(){},mounted:function(){var t=e.getSystemInfoSync();this.wh=t.windowHeight},onShow:function(){var e=this;this.loading=!0,this.paging.page=1,this.orderList=[],this.getList(),setTimeout((function(){e.loading=!1}),500)},onPullDownRefresh:function(){this.status="loadmore",this.paging.page=1,this.orderList=[],this.getList(),setTimeout((function(){e.stopPullDownRefresh()}),1e3)},onReachBottom:function(){},methods:{scrolltolower:function(){this.paging.page*this.paging.pageSize>this.countToal?e.$showMsg("已全部加载完毕"):this.isloading||"nomore"!=this.status&&(this.status="loading",this.getList())},initData:function(){this.getList()},getList:function(){var t=this;return m(o.default.mark((function n(){var i,a,u,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.isloading=!0,i=wx.getStorageSync("token"),!i){n.next=22;break}return n.next=5,(0,r.orderPagingApi)(t.paging);case 5:if(a=n.sent,console.log(a),t.isloading=!1,0!==a.code){n.next=18;break}(u=t.orderList).push.apply(u,s(a.data.list)),t.countToal=a.data.total,c=a.data.list,0!=c.length&&(t.show=!1),c&&Array.isArray(c)&&c.forEach((function(e){var t=0;e.orderDetails.forEach((function(e){t+=e.number})),e.sumNum=t})),t.paging.page>=a.data.pages&&(t.status="nomore"),t.paging.page=t.paging.page+1,n.next=19;break;case 18:return n.abrupt("return",e.$showMsg(a.msg));case 19:t.loading&&setTimeout((function(){t.loading=!1}),1500),n.next=23;break;case 22:e.showModal({title:"提示",content:"请登录",showCancel:!1,success:function(t){t.confirm?e.switchTab({url:"/pages/my/my"}):t.cancel&&console.log("用户点击取消")}});case 23:case"end":return n.stop()}}),n)})))()},onRefresh:function(){console.log("正在刷新"),this.finished=!1,this.loading=!0,console.log("正在调用onload"),this.onLoad()},addOrderAgain:function(t){return m(o.default.mark((function n(){var i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,r.orderAgainApi)({id:t.id});case 2:if(i=n.sent,0!==i.code){n.next=7;break}e.switchTab({url:"/pages/index/index"}),n.next=8;break;case 7:return n.abrupt("return",e.$showMsg(i.msg));case 8:case"end":return n.stop()}}),n)})))()},beforeClose:function(e){var t=e.position,n=e.instance;switch(t){case"left":case"cell":case"outside":n.close();break;case"right":n.close();break}},deleteOrder:function(e){var t=this;this.$dialog.confirm({title:"确认删除",message:"确认要删除当前订单吗？"}).then((function(){(0,r.deleteOrderApi)(e).then((function(e){0===e.code?(t.getList(),console.log("删除成功!正在调用onload"),t.$notify({type:"success",message:"删除成功"})):t.$notify({type:"warning",message:e.msg})})).catch((function(e){t.$notify({type:"danger",message:e})})).finally((function(){console.log("进入finally"),t.refreshing=!0,t.onRefresh()}))}))},getStatus:function(e){var t="";switch(e){case 1:t="待付款";break;case 2:t="正在派送";break;case 3:t="已派送";break;case 4:t="已完成";break;case 5:t="已取消";break}return t},gotoDetail:function(t){e.setStorageSync("item",t),e.navigateTo({url:"/pages/orderDetail/orderDetail"})},touchstartE:function(){this.touchT=(new Date).getTime()},touchendE:function(t){var n=this;this.touchE=(new Date).getTime(),this.touchE-this.touchT<350?this.gotoDetail(t):e.showModal({title:"是否删除订单",content:"删除订单将无法查看记录",success:function(e){console.log("1"),e.confirm?n.orderList=n.orderList.filter((function(e){if(e.id!=t.id)return e})):e.cancel&&console.log("用户点击取消")}})}}};t.default=p}).call(this,n("543d")["default"])}},[["327c","common/runtime","common/vendor"]]]);